(()=>{"use strict";function e(e,t){e.classList.remove(t.inputErrorClass);var n="".concat(e.id,"-error");document.getElementById(n).textContent=""}function t(t,n){t.reset(),t.querySelectorAll(n.inputSelector).forEach((function(t){e(t,n)}))}function n(e){e.disabled=!0}function o(t,o){var r=t.querySelector(o.submitButtonSelector),c=t.querySelectorAll(o.inputSelector);console.log(r),c.forEach((function(c){c.addEventListener("input",(function(){(function(t,n){t.validity.valid?e(t,n):function(e,t,n){e.classList.add(n.inputErrorClass);var o="".concat(e.id,"-error"),r=document.getElementById(o);r?r.textContent=t:console.error("Error element with id '".concat(o,"' not found"))}(t,t.validationMessage,n)})(c,o),function(e,t){e.checkValidity()?t.disabled=!1:n(t)}(t,r)}))}))}function r(e){e.classList.add("popup_opened"),e.contains(e.querySelector(".popup__form"))&&n(e.querySelector(".popup__form").elements.save),document.addEventListener("keydown",l)}function c(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",l)}function l(e){var t=document.querySelector(".popup_opened");"Escape"===e.key&&c(t)}function i(e){e.target.classList.toggle("element__like_active")}function u(e,t,n,o){var r=t.cloneNode(!0),c=r.querySelector(o.imageSelector),l=r.querySelector(o.titleSelector),u=r.querySelector(o.likeButtonSelector),a=r.querySelector(o.deleteButtonSelector);return c.src=e.link,c.alt=e.name,l.textContent=e.name,u.addEventListener("click",i),a.addEventListener("click",(function(){return r.remove()})),c.addEventListener("click",(function(){n(c.src,c.alt)})),r}function a(e,t,n){e[n](t)}console.log(Array.from(document.all).map((function(e){return e.id})).filter((function(e){return""!=e})));var d,s=document.querySelector(".profile"),p=s.querySelector(".profile__name"),m=s.querySelector(".profile__description"),f=s.querySelector(".profile__edit"),v=s.querySelector(".profile__add"),y=Array.from(document.getElementsByClassName("popup")),_=document.getElementById("edit-profile"),S=document.getElementById("open-image"),E=S.querySelector(".popup__image"),g=S.querySelector(".popup__caption"),k=document.getElementById("add-card"),q=document.forms.profile,h=document.forms.card,L=q.elements.name,x=q.elements.about,B=h.elements.name,C=h.elements.link,b=document.querySelectorAll(".popup__close"),j=document.querySelector(".elements__list"),A={imageSelector:".element__image",titleSelector:".element__title",likeButtonSelector:".element__like",deleteButtonSelector:".element__delete"},I=document.getElementById("card").content.querySelector(".element").cloneNode(!0),w={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inputErrorClass:"popup__input_type_error"};function N(e,t){r(S),E.src=e,E.alt=t,g.textContent=t}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=u(e,I,N,A);a(j,t,"append")})),f.addEventListener("click",(function(){r(_),t(q,w),L.value=p.textContent,x.value=m.textContent})),v.addEventListener("click",(function(){r(k),t(h,w)})),d=w,document.querySelectorAll(d.formSelector).forEach((function(e){e.addEventListener("input",(function(){return o(e,d)}))})),b.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){c(t)}))})),q.addEventListener("submit",(function(e){e.preventDefault();var t=L.value,n=x.value;p.textContent=t,m.textContent=n,c(_)})),h.addEventListener("submit",(function(e){e.preventDefault();var t=u({name:String(B.value),link:String(C.value)},I,N,A);console.log(t),a(j,t,"prepend"),e.target.reset(),c(k)})),y.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target===e&&c(e)}))}))})();