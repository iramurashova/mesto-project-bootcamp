(()=>{"use strict";function e(e,t){e.classList.remove(t.inputErrorClass);var n="".concat(e.id,"-error");document.getElementById(n).textContent="",console.log(e)}var t,n=document.querySelector(".profile"),o=n.querySelector(".profile__name"),r=n.querySelector(".profile__description"),c=n.querySelector(".profile__edit"),l=n.querySelector(".profile__add"),i=Array.from(document.getElementsByClassName("popup")),u=document.getElementById("edit_profile"),a=document.getElementById("open_image"),s=a.querySelector(".popup__image"),d=a.querySelector(".popup__caption"),p=document.getElementById("add_card"),m=document.forms.profile,f=document.forms.card,_=m.elements.name,v=m.elements.about,y=f.elements.name,S=f.elements.link,E=document.querySelectorAll(".popup__close"),g=document.querySelector(".elements__list"),k=document.getElementById("card").content.querySelector(".element").cloneNode(!0),q={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inputErrorClass:"popup__input_type_error"};function L(e){var t=k.cloneNode(!0),n=t.querySelector(".element__image"),o=t.querySelector(".element__title"),r=t.querySelector(".element__like"),c=t.querySelector(".element__delete");return n.src=e.link,n.alt=e.name,o.textContent=e.name,r.addEventListener("click",B),c.addEventListener("click",(function(){return t.remove()})),n.addEventListener("click",(function(){x(a),s.src=n.src,s.alt=n.alt,d.textContent=o.textContent})),t}function h(e,t){g[t](e)}function x(e){e.classList.add("popup_opened"),e.contains(e.querySelector(".popup__form"))&&disableButton(e.querySelector(".popup__form").elements.save),document.addEventListener("keydown",b)}function C(t){var n,o;t.classList.remove("popup_opened"),t.contains(t.querySelector(".popup__form"))&&(n=t.querySelector(".popup__form"),o=q,n.reset(),n.querySelectorAll(o.inputSelector).forEach((function(t){e(t,o)}))),document.removeEventListener("keydown",b)}function b(e){var t=document.querySelector(".popup_opened");"Escape"===e.key&&C(t)}function B(e){e.target.classList.toggle("element__like_active")}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){h(L(e),"append")})),t=q,document.querySelectorAll(t.formSelector).forEach((function(n){n.addEventListener("input",(function(){return function(t,n){var o=t.querySelector(n.submitButtonSelector),r=t.querySelectorAll(n.inputSelector);console.log(o),r.forEach((function(r){r.addEventListener("input",(function(){(function(t,n){t.validity.valid?e(t,n):function(e,t,n){e.classList.add(n.inputErrorClass);var o="".concat(e.id,"-error");document.getElementById(o).textContent=t,console.log(e)}(t,t.validationMessage,n)})(r,n),function(e,t){e.checkValidity()?t.disabled=!1:t.disabled=!0}(t,o)}))}))}(n,t)}))})),c.addEventListener("click",(function(){x(u),_.value=o.textContent,v.value=r.textContent})),l.addEventListener("click",(function(){x(p),disableButton(f.elements.save)})),E.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return C(t)}))})),m.addEventListener("submit",(function(e){e.preventDefault();var t=_.value,n=v.value;o.textContent=t,r.textContent=n,C(u)})),f.addEventListener("submit",(function(e){e.preventDefault();var t=L({name:String(y.value),link:String(S.value)});console.log(t),h(t,"prepend"),e.target.reset(),C(p)})),i.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target===e&&C(e)}))}))})();